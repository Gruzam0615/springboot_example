<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>JPA01</title>
</head>
<body>
<main>
    <h1>클럽 등록</h1>
    <div class="clubDiv">
        <label for="clubName">클럽명: </label>
        <input type="text" id="clubName" class="clubName" name="clubName" />
        <br/>
        <input type="button" id="addCategoryBtn" value="분야 추가" />
        <br/>
        <div class="clubCategoryDiv"></div>
        <input type="button" id="addClub" value="클럽 등록" />
    </div>
</main>
</body>
<script>
const addCategoryBtn = document.querySelector("#addCategoryBtn");
const addClubBtn = document.querySelector("#addClub");

addCategoryBtn.addEventListener("click", () => {

    const clubCategoryDiv = document.querySelector(".clubCategoryDiv");

    const categoryLabel = document.createElement("label");
    categoryLabel.setAttribute("for", "clubCateogry");
    categoryLabel.setAttribute("class", "clubCategoryLabel");
    categoryLabel.innerHTML = "분야: ";

    const categoryInput = document.createElement("input");
    categoryInput.setAttribute("type", "text")
    categoryInput.setAttribute("class", "clubCategory");
    categoryInput.setAttribute("name", "clubCategory");

    const brElement = document.createElement("br");

    clubCategoryDiv.appendChild(categoryLabel);
    clubCategoryDiv.appendChild(categoryInput);
    clubCategoryDiv.appendChild(brElement);

});

addClubBtn.addEventListener("click", () => {
    const requestURL = `/club/insert`;
    const formData = new FormData();

    const clubNameData = document.querySelector("#clubName").value;
    const clubCategory = document.querySelectorAll(".clubCategory");

    formData.append("clubName", clubNameData);
    if(clubCategory != null) {
        for(let i = 0; i < clubCategory.length; i++) {
            formData.append("clubCategory", clubCategory[i].value);
        }
    }

    const options = {
        method: "POST",
        body: formData,
    }

    fetch(requestURL, options)
        .then(response => response.text())
        .then(result => console.log(result) );
});

</script> 
</html>
